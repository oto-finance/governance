var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;import{b6 as i,bc as a,a$ as s,b5 as u}from"./vendor.e4bb2c52.js";var c,l,f,p,d,h,y,g,b,m,v,w,_,S,k,E,j,O,A,x,P,R,B,M,C,T={exports:{}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */c=T,function(e){var t="object"==typeof i?i:"object"==typeof self?self:"object"==typeof this?this:{};function r(e,r){return e!==t&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(t,n){return e[t]=r?r(t,n):n}}!function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};l=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)},f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},d=function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},h=function(e,t){return function(r,n){t(r,n,e)}},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e,t,r,n){function o(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){e.done?r(e.value):o(e.value).then(a,s)}u((n=n.apply(e,t||[])).next())}))},b=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},m=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||C(t,e,r)},C=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},v=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},w=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},_=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w(arguments[t]));return e},S=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n},k=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},E=function(e){return this instanceof E?(this.v=e,this):new E(e)},j=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{u(o[e](t))}catch(r){f(i[0][3],r)}}function u(e){e.value instanceof E?Promise.resolve(e.value.v).then(c,l):f(i[0][2],e)}function c(e){s("next",e)}function l(e){s("throw",e)}function f(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}},O=function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:E(e[n](t)),done:"return"===n}:o?o(t):t}:o}},A=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){o(n,i,(t=e[r](t)).done,t.value)}))}}function o(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}},x=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var r=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&C(t,e,n);return r(t,e),t},R=function(e){return e&&e.__esModule?e:{default:e}},B=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},M=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},e("__extends",l),e("__assign",f),e("__rest",p),e("__decorate",d),e("__param",h),e("__metadata",y),e("__awaiter",g),e("__generator",b),e("__exportStar",m),e("__createBinding",C),e("__values",v),e("__read",w),e("__spread",_),e("__spreadArrays",S),e("__spreadArray",k),e("__await",E),e("__asyncGenerator",j),e("__asyncDelegator",O),e("__asyncValues",A),e("__makeTemplateObject",x),e("__importStar",P),e("__importDefault",R),e("__classPrivateFieldGet",B),e("__classPrivateFieldSet",M)}(r(t,r(c.exports)))}();var F,I={exports:{}},L="object"==typeof Reflect?Reflect:null,N=L&&"function"==typeof L.apply?L.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};F=L&&"function"==typeof L.ownKeys?L.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var U=Number.isNaN||function(e){return e!=e};function z(){z.init.call(this)}I.exports=z,I.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}K(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&K(e,"error",t,r)}(e,o,{once:!0})}))},z.EventEmitter=z,z.prototype._events=void 0,z.prototype._eventsCount=0,z.prototype._maxListeners=void 0;var q=10;function D(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function W(e){return void 0===e._maxListeners?z.defaultMaxListeners:e._maxListeners}function H(e,t,r,n){var o,i,a,s;if(D(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=W(e))>0&&a.length>o&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function J(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function G(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=J.bind(n);return o.listener=r,n.wrapFn=o,o}function V(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):Q(o,o.length)}function $(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function Q(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function K(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(z,"defaultMaxListeners",{enumerable:!0,get:function(){return q},set:function(e){if("number"!=typeof e||e<0||U(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");q=e}}),z.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},z.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||U(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},z.prototype.getMaxListeners=function(){return W(this)},z.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)N(s,this,t);else{var u=s.length,c=Q(s,u);for(r=0;r<u;++r)N(c[r],this,t)}return!0},z.prototype.addListener=function(e,t){return H(this,e,t,!1)},z.prototype.on=z.prototype.addListener,z.prototype.prependListener=function(e,t){return H(this,e,t,!0)},z.prototype.once=function(e,t){return D(t),this.on(e,G(this,e,t)),this},z.prototype.prependOnceListener=function(e,t){return D(t),this.prependListener(e,G(this,e,t)),this},z.prototype.removeListener=function(e,t){var r,n,o,i,a;if(D(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},z.prototype.off=z.prototype.removeListener,z.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},z.prototype.listeners=function(e){return V(this,e,!0)},z.prototype.rawListeners=function(e){return V(this,e,!1)},z.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):$.call(e,t)},z.prototype.listenerCount=$,z.prototype.eventNames=function(){return this._eventsCount>0?F(this._events):[]};var Z={},X={},Y=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0},ee=Y,te=function(){return ee()&&!!Symbol.toStringTag},re="undefined"!=typeof Symbol&&Symbol,ne=Y,oe="Function.prototype.bind called on incompatible ",ie=Array.prototype.slice,ae=Object.prototype.toString,se=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==ae.call(t))throw new TypeError(oe+t);for(var r,n=ie.call(arguments,1),o=function(){if(this instanceof r){var o=t.apply(this,n.concat(ie.call(arguments)));return Object(o)===o?o:this}return t.apply(e,n.concat(ie.call(arguments)))},i=Math.max(0,t.length-n.length),a=[],s=0;s<i;s++)a.push("$"+s);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var u=function(){};u.prototype=t.prototype,r.prototype=new u,u.prototype=null}return r},ue=Function.prototype.bind||se,ce=ue.call(Function.call,Object.prototype.hasOwnProperty),le=SyntaxError,fe=Function,pe=TypeError,de=function(e){try{return fe('"use strict"; return ('+e+").constructor;")()}catch(t){}},he=Object.getOwnPropertyDescriptor;if(he)try{he({},"")}catch(na){he=null}var ye=function(){throw new pe},ge=he?function(){try{return ye}catch(e){try{return he(arguments,"callee").get}catch(t){return ye}}}():ye,be="function"==typeof re&&"function"==typeof Symbol&&"symbol"==typeof re("foo")&&"symbol"==typeof Symbol("bar")&&ne(),me=Object.getPrototypeOf||function(e){return e.__proto__},ve={},we="undefined"==typeof Uint8Array?undefined:me(Uint8Array),_e={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":be?me([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":ve,"%AsyncGenerator%":ve,"%AsyncGeneratorFunction%":ve,"%AsyncIteratorPrototype%":ve,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":fe,"%GeneratorFunction%":ve,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":be?me(me([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&be?me((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&be?me((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":be?me(""[Symbol.iterator]()):undefined,"%Symbol%":be?Symbol:undefined,"%SyntaxError%":le,"%ThrowTypeError%":ge,"%TypedArray%":we,"%TypeError%":pe,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},Se=function e(t){var r;if("%AsyncFunction%"===t)r=de("async function () {}");else if("%GeneratorFunction%"===t)r=de("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=de("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=me(o.prototype))}return _e[t]=r,r},ke={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ee=ue,je=ce,Oe=Ee.call(Function.call,Array.prototype.concat),Ae=Ee.call(Function.apply,Array.prototype.splice),xe=Ee.call(Function.call,String.prototype.replace),Pe=Ee.call(Function.call,String.prototype.slice),Re=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Be=/\\(\\)?/g,Me=function(e){var t=Pe(e,0,1),r=Pe(e,-1);if("%"===t&&"%"!==r)throw new le("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new le("invalid intrinsic syntax, expected opening `%`");var n=[];return xe(e,Re,(function(e,t,r,o){n[n.length]=r?xe(o,Be,"$1"):t||e})),n},Ce=function(e,t){var r,n=e;if(je(ke,n)&&(n="%"+(r=ke[n])[0]+"%"),je(_e,n)){var o=_e[n];if(o===ve&&(o=Se(n)),void 0===o&&!t)throw new pe("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new le("intrinsic "+e+" does not exist!")},Te=function(e,t){if("string"!=typeof e||0===e.length)throw new pe("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new pe('"allowMissing" argument must be a boolean');var r=Me(e),n=r.length>0?r[0]:"",o=Ce("%"+n+"%",t),i=o.name,a=o.value,s=!1,u=o.alias;u&&(n=u[0],Ae(r,Oe([0,1],u)));for(var c=1,l=!0;c<r.length;c+=1){var f=r[c],p=Pe(f,0,1),d=Pe(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===d||"'"===d||"`"===d)&&p!==d)throw new le("property names with quotes must have matching quotes");if("constructor"!==f&&l||(s=!0),je(_e,i="%"+(n+="."+f)+"%"))a=_e[i];else if(null!=a){if(!(f in a)){if(!t)throw new pe("base intrinsic for "+e+" exists, but the property is not available.");return}if(he&&c+1>=r.length){var h=he(a,f);a=(l=!!h)&&"get"in h&&!("originalValue"in h.get)?h.get:a[f]}else l=je(a,f),a=a[f];l&&!s&&(_e[i]=a)}}return a},Fe={exports:{}};!function(e){var t=ue,r=Te,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||t.call(o,n),a=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(s)try{s({},"a",{value:1})}catch(na){s=null}e.exports=function(e){var r=i(t,o,arguments);if(a&&s){var n=a(r,"length");n.configurable&&s(r,"length",{value:1+u(0,e.length-(arguments.length-1))})}return r};var c=function(){return i(t,n,arguments)};s?s(e.exports,"apply",{value:c}):e.exports.apply=c}(Fe);var Ie=Te,Le=Fe.exports,Ne=Le(Ie("String.prototype.indexOf")),Ue=function(e,t){var r=Ie(e,!!t);return"function"==typeof r&&Ne(e,".prototype.")>-1?Le(r):r},ze=te(),qe=Ue("Object.prototype.toString"),De=function(e){return!(ze&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===qe(e)},We=function(e){return!!De(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==qe(e)&&"[object Function]"===qe(e.callee)},He=function(){return De(arguments)}();De.isLegacyArguments=We;var Je,Ge=He?De:We,Ve=Object.prototype.toString,$e=Function.prototype.toString,Qe=/^\s*(?:function)?\*/,Ke=te(),Ze=Object.getPrototypeOf,Xe=function(e){if("function"!=typeof e)return!1;if(Qe.test($e.call(e)))return!0;if(!Ke)return"[object GeneratorFunction]"===Ve.call(e);if(!Ze)return!1;if(void 0===Je){var t=function(){if(!Ke)return!1;try{return Function("return function*() {}")()}catch(na){}}();Je=!!t&&Ze(t)}return Ze(e)===Je},Ye=Object.prototype.hasOwnProperty,et=Object.prototype.toString,tt=function(e,t,r){if("[object Function]"!==et.call(t))throw new TypeError("iterator must be a function");var n=e.length;if(n===+n)for(var o=0;o<n;o++)t.call(r,e[o],o,e);else for(var i in e)Ye.call(e,i)&&t.call(r,e[i],i,e)},rt=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],nt=function(){for(var e=[],t=0;t<rt.length;t++)"function"==typeof i[rt[t]]&&(e[e.length]=rt[t]);return e},ot=Te("%Object.getOwnPropertyDescriptor%");if(ot)try{ot([],"length")}catch(na){ot=null}var it=ot,at=tt,st=nt,ut=Ue,ct=ut("Object.prototype.toString"),lt=te(),ft=st(),pt=ut("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},dt=ut("String.prototype.slice"),ht={},yt=it,gt=Object.getPrototypeOf;lt&&yt&&gt&&at(ft,(function(e){var t=new i[e];if(Symbol.toStringTag in t){var r=gt(t),n=yt(r,Symbol.toStringTag);if(!n){var o=gt(r);n=yt(o,Symbol.toStringTag)}ht[e]=n.get}}));var bt=function(e){if(!e||"object"!=typeof e)return!1;if(!lt||!(Symbol.toStringTag in e)){var t=dt(ct(e),8,-1);return pt(ft,t)>-1}return!!yt&&function(e){var t=!1;return at(ht,(function(r,n){if(!t)try{t=r.call(e)===n}catch(na){}})),t}(e)},mt=tt,vt=nt,wt=Ue,_t=wt("Object.prototype.toString"),St=te(),kt=vt(),Et=wt("String.prototype.slice"),jt={},Ot=it,At=Object.getPrototypeOf;St&&Ot&&At&&mt(kt,(function(e){if("function"==typeof i[e]){var t=new i[e];if(Symbol.toStringTag in t){var r=At(t),n=Ot(r,Symbol.toStringTag);if(!n){var o=At(r);n=Ot(o,Symbol.toStringTag)}jt[e]=n.get}}}));var xt=bt,Pt=function(e){return!!xt(e)&&(St&&Symbol.toStringTag in e?function(e){var t=!1;return mt(jt,(function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(na){}})),t}(e):Et(_t(e),8,-1))};!function(e){var t=Ge,r=Xe,n=Pt,o=bt;function i(e){return e.call.bind(e)}var a="undefined"!=typeof BigInt,s="undefined"!=typeof Symbol,u=i(Object.prototype.toString),c=i(Number.prototype.valueOf),l=i(String.prototype.valueOf),f=i(Boolean.prototype.valueOf);if(a)var p=i(BigInt.prototype.valueOf);if(s)var d=i(Symbol.prototype.valueOf);function h(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(na){return!1}}function y(e){return"[object Map]"===u(e)}function g(e){return"[object Set]"===u(e)}function b(e){return"[object WeakMap]"===u(e)}function m(e){return"[object WeakSet]"===u(e)}function v(e){return"[object ArrayBuffer]"===u(e)}function w(e){return"undefined"!=typeof ArrayBuffer&&(v.working?v(e):e instanceof ArrayBuffer)}function _(e){return"[object DataView]"===u(e)}function S(e){return"undefined"!=typeof DataView&&(_.working?_(e):e instanceof DataView)}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=o,e.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},e.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||S(e)},e.isUint8Array=function(e){return"Uint8Array"===n(e)},e.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===n(e)},e.isUint16Array=function(e){return"Uint16Array"===n(e)},e.isUint32Array=function(e){return"Uint32Array"===n(e)},e.isInt8Array=function(e){return"Int8Array"===n(e)},e.isInt16Array=function(e){return"Int16Array"===n(e)},e.isInt32Array=function(e){return"Int32Array"===n(e)},e.isFloat32Array=function(e){return"Float32Array"===n(e)},e.isFloat64Array=function(e){return"Float64Array"===n(e)},e.isBigInt64Array=function(e){return"BigInt64Array"===n(e)},e.isBigUint64Array=function(e){return"BigUint64Array"===n(e)},y.working="undefined"!=typeof Map&&y(new Map),e.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},g.working="undefined"!=typeof Set&&g(new Set),e.isSet=function(e){return"undefined"!=typeof Set&&(g.working?g(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},m.working="undefined"!=typeof WeakSet&&m(new WeakSet),e.isWeakSet=function(e){return m(e)},v.working="undefined"!=typeof ArrayBuffer&&v(new ArrayBuffer),e.isArrayBuffer=w,_.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&_(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=S;var k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===u(e)}function j(e){return void 0!==k&&(void 0===E.working&&(E.working=E(new k)),E.working?E(e):e instanceof k)}function O(e){return h(e,c)}function A(e){return h(e,l)}function x(e){return h(e,f)}function P(e){return a&&h(e,p)}function R(e){return s&&h(e,d)}e.isSharedArrayBuffer=j,e.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},e.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},e.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},e.isGeneratorObject=function(e){return"[object Generator]"===u(e)},e.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},e.isNumberObject=O,e.isStringObject=A,e.isBooleanObject=x,e.isBigIntObject=P,e.isSymbolObject=R,e.isBoxedPrimitive=function(e){return O(e)||A(e)||x(e)||P(e)||R(e)},e.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(w(e)||j(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))}(X);var Rt=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8};!function(e){var t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},r=/%[sdj%]/g;e.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,a=o.length,s=String(e).replace(r,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}})),u=o[n];n<a;u=o[++n])h(u)||!v(u)?s+=" "+u:s+=" "+i(u);return s},e.deprecate=function(t,r){if("undefined"!=typeof process&&!0===process.noDeprecation)return t;if("undefined"==typeof process)return function(){return e.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var n={},o=/^$/;function i(t,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),c(n,t,n.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function u(e,t){return e}function c(t,r,n){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return g(o)||(o=c(t,o,n)),o}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(h(t))return e.stylize("null","null")}(t,r);if(i)return i;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),_(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(r);if(0===a.length){if(S(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(m(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return t.stylize(Date.prototype.toString.call(r),"date");if(_(r))return l(r)}var v,k="",E=!1,j=["{","}"];(p(r)&&(E=!0,j=["[","]"]),S(r))&&(k=" [Function"+(r.name?": "+r.name:"")+"]");return m(r)&&(k=" "+RegExp.prototype.toString.call(r)),w(r)&&(k=" "+Date.prototype.toUTCString.call(r)),_(r)&&(k=" "+l(r)),0!==a.length||E&&0!=r.length?n<0?m(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),v=E?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)A(t,String(a))?i.push(f(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(f(e,t,r,n,o,!0))})),i}(t,r,n,s,a):a.map((function(e){return f(t,r,n,s,e,E)})),t.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(v,k,j)):j[0]+k+j[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o,i){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),A(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=h(r)?c(e,u.value,null):c(e,u.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function h(e){return null===e}function y(e){return"number"==typeof e}function g(e){return"string"==typeof e}function b(e){return void 0===e}function m(e){return v(e)&&"[object RegExp]"===k(e)}function v(e){return"object"==typeof e&&null!==e}function w(e){return v(e)&&"[object Date]"===k(e)}function _(e){return v(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!n[t])if(o.test(t)){var r=process.pid;n[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else n[t]=function(){};return n[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=X,e.isArray=p,e.isBoolean=d,e.isNull=h,e.isNullOrUndefined=function(e){return null==e},e.isNumber=y,e.isString=g,e.isSymbol=function(e){return"symbol"==typeof e},e.isUndefined=b,e.isRegExp=m,e.types.isRegExp=m,e.isObject=v,e.isDate=w,e.types.isDate=w,e.isError=_,e.types.isNativeError=_,e.isFunction=S,e.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.isBuffer=Rt;var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=a.exports,e._extend=function(e,t){if(!t||!v(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}e.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(x&&e[x]){var r;if("function"!=typeof(r=e[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,x,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(a){r(a)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),x&&Object.defineProperty(r,x,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},e.promisify.custom=x,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};e.apply(this,t).then((function(e){process.nextTick(i.bind(null,null,e))}),(function(e){process.nextTick(P.bind(null,e,i))}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,t(e)),r}}(Z);var Bt={exports:{}},Mt={exports:{}};"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?Mt.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,a=arguments.length;switch(a){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick((function(){e.call(null,t)}));case 3:return process.nextTick((function(){e.call(null,t,r)}));case 4:return process.nextTick((function(){e.call(null,t,r,n)}));default:for(o=new Array(a-1),i=0;i<o.length;)o[i++]=arguments[i];return process.nextTick((function(){e.apply(null,o)}))}}}:Mt.exports=process;var Ct={}.toString,Tt=Array.isArray||function(e){return"[object Array]"==Ct.call(e)},Ft=I.exports.EventEmitter,It={exports:{}};!function(e,t){var r=s,n=r.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=i),o(n,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=n(e);return void 0!==t?"string"==typeof r?o.fill(t,r):o.fill(t):o.fill(0),o},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(It,It.exports);var Lt={};function Nt(e){return Object.prototype.toString.call(e)}Lt.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Nt(e)},Lt.isBoolean=function(e){return"boolean"==typeof e},Lt.isNull=function(e){return null===e},Lt.isNullOrUndefined=function(e){return null==e},Lt.isNumber=function(e){return"number"==typeof e},Lt.isString=function(e){return"string"==typeof e},Lt.isSymbol=function(e){return"symbol"==typeof e},Lt.isUndefined=function(e){return void 0===e},Lt.isRegExp=function(e){return"[object RegExp]"===Nt(e)},Lt.isObject=function(e){return"object"==typeof e&&null!==e},Lt.isDate=function(e){return"[object Date]"===Nt(e)},Lt.isError=function(e){return"[object Error]"===Nt(e)||e instanceof Error},Lt.isFunction=function(e){return"function"==typeof e},Lt.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},Lt.isBuffer=Buffer.isBuffer;var Ut={exports:{}};!function(e){var t=It.exports.Buffer,r=u;e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return t.alloc(0);if(1===this.length)return this.head.data;for(var r,n,o,i=t.allocUnsafe(e>>>0),a=this.head,s=0;a;)r=a.data,n=i,o=s,r.copy(n,o),s+=a.data.length,a=a.next;return i},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})}(Ut);var zt=Mt.exports;function qt(e,t){e.emit("error",t)}var Dt={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||zt.nextTick(qt,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(zt.nextTick(qt,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}},Wt=function(e,t){if(Ht("noDeprecation"))return e;var r=!1;return function(){if(!r){if(Ht("throwDeprecation"))throw new Error(t);Ht("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}};function Ht(e){try{if(!i.localStorage)return!1}catch(r){return!1}var t=i.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}var Jt=Mt.exports,Gt=ir;function Vt(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}var $t,Qt=Jt.nextTick;ir.WritableState=or;var Kt=Object.create(Lt);Kt.inherits=a.exports;var Zt={deprecate:Wt},Xt=Ft,Yt=It.exports.Buffer,er=function(){};var tr,rr=Dt;function nr(){}function or(e,t){e=e||{};var r=t instanceof($t=$t||hr);this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(Jt.nextTick(o,n),Jt.nextTick(fr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),fr(e,t))}(e,r,n,t,o);else{var i=cr(r);i||r.corked||r.bufferProcessing||!r.bufferedRequest||ur(e,r),n?Qt(sr,e,r,i,o):sr(e,r,i,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Vt(this)}function ir(e){if($t=$t||hr,!(tr.call(ir,this)||this instanceof $t))return new ir(e);this._writableState=new or(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Xt.call(this)}function ar(e,t,r,n,o,i,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function sr(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),fr(e,t)}function ur(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var a=0,s=!0;r;)o[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;o.allBuffers=s,ar(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new Vt(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback;if(ar(e,t,!1,t.objectMode?1:u.length,u,c,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function cr(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function lr(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),fr(e,t)}))}function fr(e,t){var r=cr(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,Jt.nextTick(lr,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}Kt.inherits(ir,Xt),or.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(or.prototype,"buffer",{get:Zt.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(tr=Function.prototype[Symbol.hasInstance],Object.defineProperty(ir,Symbol.hasInstance,{value:function(e){return!!tr.call(this,e)||this===ir&&(e&&e._writableState instanceof or)}})):tr=function(e){return e instanceof this},ir.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},ir.prototype.write=function(e,t,r){var n,o=this._writableState,i=!1,a=!o.objectMode&&(n=e,Yt.isBuffer(n)||n instanceof er);return a&&!Yt.isBuffer(e)&&(e=function(e){return Yt.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=nr),o.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),Jt.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o=!0,i=!1;return null===r?i=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),Jt.nextTick(n,i),o=!1),o}(this,o,e,r))&&(o.pendingcb++,i=function(e,t,r,n,o,i){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Yt.from(t,r));return t}(t,n,o);n!==a&&(r=!0,o="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else ar(e,t,!1,s,n,o,i);return u}(this,o,a,e,t,r)),i},ir.prototype.cork=function(){this._writableState.corked++},ir.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||ur(this,e))},ir.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(ir.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ir.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},ir.prototype._writev=null,ir.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,fr(e,t),r&&(t.finished?Jt.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(ir.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),ir.prototype.destroy=rr.destroy,ir.prototype._undestroy=rr.undestroy,ir.prototype._destroy=function(e,t){this.end(),t(e)};var pr=Mt.exports,dr=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},hr=_r,yr=Object.create(Lt);yr.inherits=a.exports;var gr=Nr,br=Gt;yr.inherits(_r,gr);for(var mr=dr(br.prototype),vr=0;vr<mr.length;vr++){var wr=mr[vr];_r.prototype[wr]||(_r.prototype[wr]=br.prototype[wr])}function _r(e){if(!(this instanceof _r))return new _r(e);gr.call(this,e),br.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Sr)}function Sr(){this.allowHalfOpen||this._writableState.ended||pr.nextTick(kr,this)}function kr(e){e.end()}Object.defineProperty(_r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(_r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),_r.prototype._destroy=function(e,t){this.push(null),this.end(),pr.nextTick(t,e)};var Er={},jr=It.exports.Buffer,Or=jr.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ar(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(jr.isEncoding===Or||!Or(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=Rr,this.end=Br,t=4;break;case"utf8":this.fillLast=Pr,t=4;break;case"base64":this.text=Mr,this.end=Cr,t=3;break;default:return this.write=Tr,void(this.end=Fr)}this.lastNeed=0,this.lastTotal=0,this.lastChar=jr.allocUnsafe(t)}function xr(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function Pr(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function Rr(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Br(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Mr(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Cr(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Tr(e){return e.toString(this.encoding)}function Fr(e){return e&&e.length?this.write(e):""}Er.StringDecoder=Ar,Ar.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},Ar.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},Ar.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=xr(t[n]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if((o=xr(t[n]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if((o=xr(t[n]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},Ar.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var Ir,Lr=Mt.exports,Nr=Xr,Ur=Tt;Xr.ReadableState=Zr,I.exports.EventEmitter;var zr=function(e,t){return e.listeners(t).length},qr=Ft,Dr=It.exports.Buffer,Wr=function(){};var Hr=Object.create(Lt);Hr.inherits=a.exports;var Jr=u,Gr=void 0;Gr=Jr&&Jr.debuglog?Jr.debuglog("stream"):function(){};var Vr,$r=Ut.exports,Qr=Dt;Hr.inherits(Xr,qr);var Kr=["error","close","destroy","pause","resume"];function Zr(e,t){e=e||{};var r=t instanceof(Ir=Ir||hr);this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new $r,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Vr||(Vr=Er.StringDecoder),this.decoder=new Vr(e.encoding),this.encoding=e.encoding)}function Xr(e){if(Ir=Ir||hr,!(this instanceof Xr))return new Xr(e);this._readableState=new Zr(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),qr.call(this)}function Yr(e,t,r,n,o){var i,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,rn(e)}(e,a)):(o||(i=function(e,t){var r;n=t,Dr.isBuffer(n)||n instanceof Wr||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,t)),i?e.emit("error",i):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===Dr.prototype||(t=function(e){return Dr.from(e)}(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):en(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?en(e,a,t,!1):on(e,a)):en(e,a,t,!1))):n||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function en(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&rn(e)),on(e,t)}Object.defineProperty(Xr.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Xr.prototype.destroy=Qr.destroy,Xr.prototype._undestroy=Qr.undestroy,Xr.prototype._destroy=function(e,t){this.push(null),t(e)},Xr.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Dr.from(e,t),t=""),r=!0),Yr(this,e,t,!1,r)},Xr.prototype.unshift=function(e){return Yr(this,e,null,!0,!1)},Xr.prototype.isPaused=function(){return!1===this._readableState.flowing},Xr.prototype.setEncoding=function(e){return Vr||(Vr=Er.StringDecoder),this._readableState.decoder=new Vr(e),this._readableState.encoding=e,this};function tn(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function rn(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Gr("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Lr.nextTick(nn,e):nn(e))}function nn(e){Gr("emit readable"),e.emit("readable"),cn(e)}function on(e,t){t.readingMore||(t.readingMore=!0,Lr.nextTick(an,e,t))}function an(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Gr("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function sn(e){Gr("readable nexttick read 0"),e.read(0)}function un(e,t){t.reading||(Gr("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),cn(e),t.flowing&&!t.reading&&e.read(0)}function cn(e){var t=e._readableState;for(Gr("flow",t.flowing);t.flowing&&null!==e.read(););}function ln(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,o=r.data;e-=o.length;for(;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(a===i.length?o+=i:o+=i.slice(0,e),0===(e-=a)){a===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(a));break}++n}return t.length-=n,o}(e,t):function(e,t){var r=Dr.allocUnsafe(e),n=t.head,o=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,a),0===(e-=a)){a===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(a));break}++o}return t.length-=o,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function fn(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Lr.nextTick(pn,t,e))}function pn(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function dn(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Xr.prototype.read=function(e){Gr("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Gr("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?fn(this):rn(this),null;if(0===(e=tn(e,t))&&t.ended)return 0===t.length&&fn(this),null;var n,o=t.needReadable;return Gr("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&Gr("length less than watermark",o=!0),t.ended||t.reading?Gr("reading or ended",o=!1):o&&(Gr("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=tn(r,t))),null===(n=e>0?ln(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&fn(this)),null!==n&&this.emit("data",n),n},Xr.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Xr.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,Gr("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:h;function i(t,o){Gr("onunpipe"),t===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,Gr("cleanup"),e.removeListener("close",p),e.removeListener("finish",d),e.removeListener("drain",s),e.removeListener("error",f),e.removeListener("unpipe",i),r.removeListener("end",a),r.removeListener("end",h),r.removeListener("data",l),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||s())}function a(){Gr("onend"),e.end()}n.endEmitted?Lr.nextTick(o):r.once("end",o),e.on("unpipe",i);var s=function(e){return function(){var t=e._readableState;Gr("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&zr(e,"data")&&(t.flowing=!0,cn(e))}}(r);e.on("drain",s);var u=!1;var c=!1;function l(t){Gr("ondata"),c=!1,!1!==e.write(t)||c||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==dn(n.pipes,e))&&!u&&(Gr("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,c=!0),r.pause())}function f(t){Gr("onerror",t),h(),e.removeListener("error",f),0===zr(e,"error")&&e.emit("error",t)}function p(){e.removeListener("finish",d),h()}function d(){Gr("onfinish"),e.removeListener("close",p),h()}function h(){Gr("unpipe"),r.unpipe(e)}return r.on("data",l),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Ur(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",p),e.once("finish",d),e.emit("pipe",r),n.flowing||(Gr("pipe resume"),r.resume()),e},Xr.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var a=dn(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},Xr.prototype.on=function(e,t){var r=qr.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&rn(this):Lr.nextTick(sn,this))}return r},Xr.prototype.addListener=Xr.prototype.on,Xr.prototype.resume=function(){var e=this._readableState;return e.flowing||(Gr("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Lr.nextTick(un,e,t))}(this,e)),this},Xr.prototype.pause=function(){return Gr("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Gr("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Xr.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(Gr("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(Gr("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<Kr.length;i++)e.on(Kr[i],this.emit.bind(this,Kr[i]));return this._read=function(t){Gr("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(Xr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Xr._fromList=ln;var hn=mn,yn=hr,gn=Object.create(Lt);function bn(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function mn(e){if(!(this instanceof mn))return new mn(e);yn.call(this,e),this._transformState={afterTransform:bn.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",vn)}function vn(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){wn(e,t,r)})):wn(this,null,null)}function wn(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}gn.inherits=a.exports,gn.inherits(mn,yn),mn.prototype.push=function(e,t){return this._transformState.needTransform=!1,yn.prototype.push.call(this,e,t)},mn.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},mn.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},mn.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},mn.prototype._destroy=function(e,t){var r=this;yn.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))};var _n,Sn=jn,kn=hn,En=Object.create(Lt);function jn(e){if(!(this instanceof jn))return new jn(e);kn.call(this,e)}En.inherits=a.exports,En.inherits(jn,kn),jn.prototype._transform=function(e,t,r){r(null,e)},_n=Bt.exports,(_n=Bt.exports=Nr).Stream=_n,_n.Readable=_n,_n.Writable=Gt,_n.Duplex=hr,_n.Transform=hn,_n.PassThrough=Sn;const{Transform:On}=Bt.exports;const{Transform:An}=Bt.exports;const xn=e=>class t extends On{constructor(t,r,n,o,i){super(i),this._rate=t,this._capacity=r,this._delimitedSuffix=n,this._hashBitLength=o,this._options=i,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let n=null;try{this.update(e,t)}catch(o){n=o}r(n)}_flush(e){let t=null;try{this.push(this.digest())}catch(r){t=r}e(t)}update(e,t){if(!Buffer.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(e)||(e=Buffer.from(e,t)),this._state.absorb(e),this}digest(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}},Pn=e=>class t extends An{constructor(t,r,n,o){super(o),this._rate=t,this._capacity=r,this._delimitedSuffix=n,this._options=o,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let n=null;try{this.update(e,t)}catch(o){n=o}r(n)}_flush(){}_read(e){this.push(this.squeeze(e))}update(e,t){if(!Buffer.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(e)||(e=Buffer.from(e,t)),this._state.absorb(e),this}squeeze(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let r=this._state.squeeze(e);return void 0!==t&&(r=r.toString(t)),r}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}};var Rn={};const Bn=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];Rn.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],i=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],s=e[5]^e[15]^e[25]^e[35]^e[45],u=e[6]^e[16]^e[26]^e[36]^e[46],c=e[7]^e[17]^e[27]^e[37]^e[47],l=e[8]^e[18]^e[28]^e[38]^e[48],f=e[9]^e[19]^e[29]^e[39]^e[49];let p=l^(o<<1|i>>>31),d=f^(i<<1|o>>>31);const h=e[0]^p,y=e[1]^d,g=e[10]^p,b=e[11]^d,m=e[20]^p,v=e[21]^d,w=e[30]^p,_=e[31]^d,S=e[40]^p,k=e[41]^d;p=r^(a<<1|s>>>31),d=n^(s<<1|a>>>31);const E=e[2]^p,j=e[3]^d,O=e[12]^p,A=e[13]^d,x=e[22]^p,P=e[23]^d,R=e[32]^p,B=e[33]^d,M=e[42]^p,C=e[43]^d;p=o^(u<<1|c>>>31),d=i^(c<<1|u>>>31);const T=e[4]^p,F=e[5]^d,I=e[14]^p,L=e[15]^d,N=e[24]^p,U=e[25]^d,z=e[34]^p,q=e[35]^d,D=e[44]^p,W=e[45]^d;p=a^(l<<1|f>>>31),d=s^(f<<1|l>>>31);const H=e[6]^p,J=e[7]^d,G=e[16]^p,V=e[17]^d,$=e[26]^p,Q=e[27]^d,K=e[36]^p,Z=e[37]^d,X=e[46]^p,Y=e[47]^d;p=u^(r<<1|n>>>31),d=c^(n<<1|r>>>31);const ee=e[8]^p,te=e[9]^d,re=e[18]^p,ne=e[19]^d,oe=e[28]^p,ie=e[29]^d,ae=e[38]^p,se=e[39]^d,ue=e[48]^p,ce=e[49]^d,le=h,fe=y,pe=b<<4|g>>>28,de=g<<4|b>>>28,he=m<<3|v>>>29,ye=v<<3|m>>>29,ge=_<<9|w>>>23,be=w<<9|_>>>23,me=S<<18|k>>>14,ve=k<<18|S>>>14,we=E<<1|j>>>31,_e=j<<1|E>>>31,Se=A<<12|O>>>20,ke=O<<12|A>>>20,Ee=x<<10|P>>>22,je=P<<10|x>>>22,Oe=B<<13|R>>>19,Ae=R<<13|B>>>19,xe=M<<2|C>>>30,Pe=C<<2|M>>>30,Re=F<<30|T>>>2,Be=T<<30|F>>>2,Me=I<<6|L>>>26,Ce=L<<6|I>>>26,Te=U<<11|N>>>21,Fe=N<<11|U>>>21,Ie=z<<15|q>>>17,Le=q<<15|z>>>17,Ne=W<<29|D>>>3,Ue=D<<29|W>>>3,ze=H<<28|J>>>4,qe=J<<28|H>>>4,De=V<<23|G>>>9,We=G<<23|V>>>9,He=$<<25|Q>>>7,Je=Q<<25|$>>>7,Ge=K<<21|Z>>>11,Ve=Z<<21|K>>>11,$e=Y<<24|X>>>8,Qe=X<<24|Y>>>8,Ke=ee<<27|te>>>5,Ze=te<<27|ee>>>5,Xe=re<<20|ne>>>12,Ye=ne<<20|re>>>12,et=ie<<7|oe>>>25,tt=oe<<7|ie>>>25,rt=ae<<8|se>>>24,nt=se<<8|ae>>>24,ot=ue<<14|ce>>>18,it=ce<<14|ue>>>18;e[0]=le^~Se&Te,e[1]=fe^~ke&Fe,e[10]=ze^~Xe&he,e[11]=qe^~Ye&ye,e[20]=we^~Me&He,e[21]=_e^~Ce&Je,e[30]=Ke^~pe&Ee,e[31]=Ze^~de&je,e[40]=Re^~De&et,e[41]=Be^~We&tt,e[2]=Se^~Te&Ge,e[3]=ke^~Fe&Ve,e[12]=Xe^~he&Oe,e[13]=Ye^~ye&Ae,e[22]=Me^~He&rt,e[23]=Ce^~Je&nt,e[32]=pe^~Ee&Ie,e[33]=de^~je&Le,e[42]=De^~et&ge,e[43]=We^~tt&be,e[4]=Te^~Ge&ot,e[5]=Fe^~Ve&it,e[14]=he^~Oe&Ne,e[15]=ye^~Ae&Ue,e[24]=He^~rt&me,e[25]=Je^~nt&ve,e[34]=Ee^~Ie&$e,e[35]=je^~Le&Qe,e[44]=et^~ge&xe,e[45]=tt^~be&Pe,e[6]=Ge^~ot&le,e[7]=Ve^~it&fe,e[16]=Oe^~Ne&ze,e[17]=Ae^~Ue&qe,e[26]=rt^~me&we,e[27]=nt^~ve&_e,e[36]=Ie^~$e&Ke,e[37]=Le^~Qe&Ze,e[46]=ge^~xe&Re,e[47]=be^~Pe&Be,e[8]=ot^~le&Se,e[9]=it^~fe&ke,e[18]=Ne^~ze&Xe,e[19]=Ue^~qe&Ye,e[28]=me^~we&Me,e[29]=ve^~_e&Ce,e[38]=$e^~Ke&pe,e[39]=Qe^~Ze&de,e[48]=xe^~Re&De,e[49]=Pe^~Be&We,e[0]^=Bn[2*t],e[1]^=Bn[2*t+1]}};const Mn=Rn;function Cn(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Cn.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},Cn.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(Mn.p1600(this.state),this.count=0)},Cn.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,0!=(128&e)&&this.count===this.blockSize-1&&Mn.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,Mn.p1600(this.state),this.count=0,this.squeezing=!0},Cn.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(Mn.p1600(this.state),this.count=0);return t},Cn.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};var Tn=function(e){const t=xn(e),r=Pn(e);return function(e,n){switch("string"==typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,n);case"keccak256":return new t(1088,512,null,256,n);case"keccak384":return new t(832,768,null,384,n);case"keccak512":return new t(576,1024,null,512,n);case"sha3-224":return new t(1152,448,6,224,n);case"sha3-256":return new t(1088,512,6,256,n);case"sha3-384":return new t(832,768,6,384,n);case"sha3-512":return new t(576,1024,6,512,n);case"shake128":return new r(1344,256,31,n);case"shake256":return new r(1088,512,31,n);default:throw new Error("Invald algorithm: "+e)}}}(Cn);const Fn=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];return new r(((r,o)=>{t.errorFirst?n.push((function(e,n){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),o(t)):r(t)}else e?o(e):r(n)})):n.push((function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];r(e)}else r(e)})),e.apply(this,n)}))};var In=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)Ln.call(r,n)&&(e[n]=r[n])}return e},Ln=Object.prototype.hasOwnProperty;const Nn=In,Un=function(e){var t=(e=e||{}).max||Number.MAX_SAFE_INTEGER,r=void 0!==e.start?e.start:Math.floor(Math.random()*t);return function(){return r%=t,r++}}();var zn=qn;function qn(e){this.currentProvider=e}function Dn(e){return function(){const t=this;var r=[].slice.call(arguments),n=r.pop();t.sendAsync({method:e,params:r},n)}}function Wn(e,t){return function(){const r=this;var n=[].slice.call(arguments),o=n.pop();n.length<e&&n.push("latest"),r.sendAsync({method:t,params:n},o)}}qn.prototype.getBalance=Wn(2,"eth_getBalance"),qn.prototype.getCode=Wn(2,"eth_getCode"),qn.prototype.getTransactionCount=Wn(2,"eth_getTransactionCount"),qn.prototype.getStorageAt=Wn(3,"eth_getStorageAt"),qn.prototype.call=Wn(2,"eth_call"),qn.prototype.protocolVersion=Dn("eth_protocolVersion"),qn.prototype.syncing=Dn("eth_syncing"),qn.prototype.coinbase=Dn("eth_coinbase"),qn.prototype.mining=Dn("eth_mining"),qn.prototype.hashrate=Dn("eth_hashrate"),qn.prototype.gasPrice=Dn("eth_gasPrice"),qn.prototype.accounts=Dn("eth_accounts"),qn.prototype.blockNumber=Dn("eth_blockNumber"),qn.prototype.getBlockTransactionCountByHash=Dn("eth_getBlockTransactionCountByHash"),qn.prototype.getBlockTransactionCountByNumber=Dn("eth_getBlockTransactionCountByNumber"),qn.prototype.getUncleCountByBlockHash=Dn("eth_getUncleCountByBlockHash"),qn.prototype.getUncleCountByBlockNumber=Dn("eth_getUncleCountByBlockNumber"),qn.prototype.sign=Dn("eth_sign"),qn.prototype.sendTransaction=Dn("eth_sendTransaction"),qn.prototype.sendRawTransaction=Dn("eth_sendRawTransaction"),qn.prototype.estimateGas=Dn("eth_estimateGas"),qn.prototype.getBlockByHash=Dn("eth_getBlockByHash"),qn.prototype.getBlockByNumber=Dn("eth_getBlockByNumber"),qn.prototype.getTransactionByHash=Dn("eth_getTransactionByHash"),qn.prototype.getTransactionByBlockHashAndIndex=Dn("eth_getTransactionByBlockHashAndIndex"),qn.prototype.getTransactionByBlockNumberAndIndex=Dn("eth_getTransactionByBlockNumberAndIndex"),qn.prototype.getTransactionReceipt=Dn("eth_getTransactionReceipt"),qn.prototype.getUncleByBlockHashAndIndex=Dn("eth_getUncleByBlockHashAndIndex"),qn.prototype.getUncleByBlockNumberAndIndex=Dn("eth_getUncleByBlockNumberAndIndex"),qn.prototype.getCompilers=Dn("eth_getCompilers"),qn.prototype.compileLLL=Dn("eth_compileLLL"),qn.prototype.compileSolidity=Dn("eth_compileSolidity"),qn.prototype.compileSerpent=Dn("eth_compileSerpent"),qn.prototype.newFilter=Dn("eth_newFilter"),qn.prototype.newBlockFilter=Dn("eth_newBlockFilter"),qn.prototype.newPendingTransactionFilter=Dn("eth_newPendingTransactionFilter"),qn.prototype.uninstallFilter=Dn("eth_uninstallFilter"),qn.prototype.getFilterChanges=Dn("eth_getFilterChanges"),qn.prototype.getFilterLogs=Dn("eth_getFilterLogs"),qn.prototype.getLogs=Dn("eth_getLogs"),qn.prototype.getWork=Dn("eth_getWork"),qn.prototype.submitWork=Dn("eth_submitWork"),qn.prototype.submitHashrate=Dn("eth_submitHashrate"),qn.prototype.sendAsync=function(e,t){var r;this.currentProvider.sendAsync((r=e,Nn({id:Un(),jsonrpc:"2.0",params:[]},r)),(function(e,r){if(!e&&r.error&&(e=new Error("EthQuery - RPC Error - "+r.error.message)),e)return t(e);t(null,r.result)}))};const Hn=Z,Jn=I.exports;var Gn="object"==typeof Reflect?Reflect:null,Vn=Gn&&"function"==typeof Gn.apply?Gn.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},$n=Qn;function Qn(){Jn.call(this)}function Kn(e,t,r){try{Vn(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}function Zn(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Hn.inherits(Qn,Jn),Qn.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)Kn(s,this,t);else{var u=s.length,c=Zn(s,u);for(r=0;r<u;++r)Kn(c[r],this,t)}return!0};const Xn=$n,Yn=(e,t)=>e+t,eo=["sync","latest"];function to(e){return Number.parseInt(e,16)}const ro=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const r=e=>{const r=t=>"string"==typeof t?e===t:t.test(e);return t.include?t.include.some(r):!t.exclude.some(r)};let n;n="function"==typeof e?function(){return t.excludeMain?e.apply(this,arguments):Fn(e,t).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const o in e){const i=e[o];n[o]="function"==typeof i&&r(o)?Fn(i,t):i}return n},no=class extends Xn{constructor(e={}){super(),this._blockResetDuration=e.blockResetDuration||2e4,this._blockResetTimeout,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){if(this._currentBlock)return this._currentBlock;return await new Promise((e=>this.once("latest",e)))}removeAllListeners(e){e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener()}_start(){}_end(){}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e,t){eo.includes(e)&&this._maybeStart()}_onRemoveListener(e,t){this._getBlockTrackerEventCount()>0||this._maybeEnd()}_maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),this._start())}_maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),this._end())}_getBlockTrackerEventCount(){return eo.map((e=>this.listenerCount(e))).reduce(Yn)}_newPotentialLatest(e){const t=this._currentBlock;t&&to(e)<=to(t)||this._setCurrentBlock(e)}_setCurrentBlock(e){const t=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:t,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}};var oo=class extends no{constructor(e={}){if(!e.provider)throw new Error("PollingBlockTracker - no provider specified.");const t=e.pollingInterval||2e4,r=e.retryTimeout||t/10,n=void 0===e.keepEventLoopActive||e.keepEventLoopActive,o=e.setSkipCacheFlag||!1;super(Object.assign({blockResetDuration:t},e)),this._provider=e.provider,this._pollingInterval=t,this._retryTimeout=r,this._keepEventLoopActive=n,this._setSkipCacheFlag=o}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}_start(){this._performSync().catch((e=>this.emit("error",e)))}async _performSync(){for(;this._isRunning;)try{await this._updateLatestBlock(),await io(this._pollingInterval,!this._keepEventLoopActive)}catch(e){const r=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\n${e.stack}`);try{this.emit("error",r)}catch(t){console.error(r)}await io(this._retryTimeout,!this._keepEventLoopActive)}}async _updateLatestBlock(){const e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){const e={jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0);const t=await ro((t=>this._provider.sendAsync(e,t)))();if(t.error)throw new Error(`PollingBlockTracker - encountered error fetching block:\n${t.error}`);return t.result}};function io(e,t){return new Promise((r=>{const n=setTimeout(r,e);n.unref&&t&&n.unref()}))}var ao={},so={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});var co=T.exports,lo=function(){function e(e){if(this._maxConcurrency=e,this._queue=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),r=new Promise((function(t){return e._queue.push(t)}));return t||this._dispatch(),r},e.prototype.runExclusive=function(e){return co.__awaiter(this,void 0,void 0,(function(){var t,r,n;return co.__generator(this,(function(o){switch(o.label){case 0:return[4,this.acquire()];case 1:t=o.sent(),r=t[0],n=t[1],o.label=2;case 2:return o.trys.push([2,,4,5]),[4,e(r)];case 3:return[2,o.sent()];case 4:return n(),[7];case 5:return[2]}}))}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var r=!1;this._currentReleaser=function(){r||(r=!0,e._value++,e._dispatch())},t([this._value--,this._currentReleaser])}},e}();uo.default=lo,Object.defineProperty(so,"__esModule",{value:!0});var fo=T.exports,po=uo,ho=function(){function e(){this._semaphore=new po.default(1)}return e.prototype.acquire=function(){return fo.__awaiter(this,void 0,void 0,(function(){var e;return fo.__generator(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=t.sent(),[2,e[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();so.default=ho;var yo={};Object.defineProperty(yo,"__esModule",{value:!0}),yo.withTimeout=void 0;var go=T.exports;yo.withTimeout=function(e,t,r){var n=this;return void 0===r&&(r=new Error("timeout")),{acquire:function(){return new Promise((function(o,i){return go.__awaiter(n,void 0,void 0,(function(){var n,a;return go.__generator(this,(function(s){switch(s.label){case 0:return n=!1,setTimeout((function(){n=!0,i(r)}),t),[4,e.acquire()];case 1:return a=s.sent(),n?(Array.isArray(a)?a[1]:a)():o(a),[2]}}))}))}))},runExclusive:function(e){return go.__awaiter(this,void 0,void 0,(function(){var t,r;return go.__generator(this,(function(n){switch(n.label){case 0:t=function(){},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire()];case 2:return r=n.sent(),Array.isArray(r)?(t=r[1],[4,e(r[0])]):[3,4];case 3:return[2,n.sent()];case 4:return t=r,[4,e()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}}))}))},release:function(){e.release()},isLocked:function(){return e.isLocked()}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.withTimeout=e.Semaphore=e.Mutex=void 0;var t=so;Object.defineProperty(e,"Mutex",{enumerable:!0,get:function(){return t.default}});var r=uo;Object.defineProperty(e,"Semaphore",{enumerable:!0,get:function(){return r.default}});var n=yo;Object.defineProperty(e,"withTimeout",{enumerable:!0,get:function(){return n.withTimeout}})}(ao);var bo={},mo={},vo={};Object.defineProperty(vo,"__esModule",{value:!0}),vo.getUniqueId=void 0;let wo=Math.floor(4294967295*Math.random());vo.getUniqueId=function(){return wo=(wo+1)%4294967295,wo},Object.defineProperty(mo,"__esModule",{value:!0}),mo.createIdRemapMiddleware=void 0;const _o=vo;mo.createIdRemapMiddleware=function(){return(e,t,r,n)=>{const o=e.id,i=_o.getUniqueId();e.id=i,t.id=i,r((r=>{e.id=o,t.id=o,r()}))}};var So={};Object.defineProperty(So,"__esModule",{value:!0}),So.createAsyncMiddleware=void 0,So.createAsyncMiddleware=function(e){return async(t,r,n,o)=>{let i;const a=new Promise((e=>{i=e}));let s=null,u=!1;const c=async()=>{u=!0,n((e=>{s=e,i()})),await a};try{await e(t,r,c),u?(await a,s(null)):o(null)}catch(l){s?s(l):o(l)}}};var ko={};Object.defineProperty(ko,"__esModule",{value:!0}),ko.createScaffoldMiddleware=void 0,ko.createScaffoldMiddleware=function(e){return(t,r,n,o)=>{const i=e[t.method];return void 0===i?n():"function"==typeof i?i(t,r,n,o):(r.result=i,o())}};var Eo={},jo={};Object.defineProperty(jo,"__esModule",{value:!0});const Oo=I.exports;function Ao(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}class xo extends Oo.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const o=n[e];if(void 0===o)return!1;if("function"==typeof o)Ao(o,this,t);else{const e=o.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(o);for(let n=0;n<e;n+=1)Ao(r[n],this,t)}return!0}}jo.default=xo;var Po={},Ro={},Bo=To;To.default=To,To.stable=Lo,To.stableStringify=Lo;var Mo=[],Co=[];function To(e,t,r){var n;Fo(e,"",[],void 0);try{n=0===Co.length?JSON.stringify(e,t,r):JSON.stringify(e,Uo(t),r)}catch(i){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==Mo.length;){var o=Mo.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return n}function Fo(e,t,r,n){var o;if("object"==typeof e&&null!==e){for(o=0;o<r.length;o++)if(r[o]===e){var i=Object.getOwnPropertyDescriptor(n,t);return void(void 0!==i.get?i.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),Mo.push([n,t,e,i])):Co.push([e,t]):(n[t]="[Circular]",Mo.push([n,t,e])))}if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)Fo(e[o],o,r,e);else{var a=Object.keys(e);for(o=0;o<a.length;o++){var s=a[o];Fo(e[s],s,r,e)}}r.pop()}}function Io(e,t){return e<t?-1:e>t?1:0}function Lo(e,t,r){var n,o=No(e,"",[],void 0)||e;try{n=0===Co.length?JSON.stringify(o,t,r):JSON.stringify(o,Uo(t),r)}catch(a){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==Mo.length;){var i=Mo.pop();4===i.length?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}}return n}function No(e,t,r,n){var o;if("object"==typeof e&&null!==e){for(o=0;o<r.length;o++)if(r[o]===e){var i=Object.getOwnPropertyDescriptor(n,t);return void(void 0!==i.get?i.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),Mo.push([n,t,e,i])):Co.push([e,t]):(n[t]="[Circular]",Mo.push([n,t,e])))}try{if("function"==typeof e.toJSON)return}catch(c){return}if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)No(e[o],o,r,e);else{var a={},s=Object.keys(e).sort(Io);for(o=0;o<s.length;o++){var u=s[o];No(e[u],u,r,e),a[u]=e[u]}if(void 0===n)return a;Mo.push([n,t,e]),n[t]=a}r.pop()}}function Uo(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(Co.length>0)for(var n=0;n<Co.length;n++){var o=Co[n];if(o[1]===t&&o[0]===r){r="[Circular]",Co.splice(n,1);break}}return e.call(this,t,r)}}Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.EthereumProviderError=Ro.EthereumRpcError=void 0;const zo=Bo;class qo extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return zo.default(this.serialize(),Do,2)}}Ro.EthereumRpcError=qo;function Do(e,t){if("[Circular]"!==t)return t}Ro.EthereumProviderError=class extends qo{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}};var Wo={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.errorValues=Ho.errorCodes=void 0,Ho.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Ho.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Ho,r=Ro,n=t.errorCodes.rpc.internal,o={code:n,message:i(n)};function i(r,n="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(r)){const n=r.toString();if(c(t.errorValues,n))return t.errorValues[n].message;if(s(r))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function a(e){if(!Number.isInteger(e))return!1;const r=e.toString();return!!t.errorValues[r]||!!s(e)}function s(e){return e>=-32099&&e<=-32e3}function u(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=i,e.isValidCode=a,e.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:n=!1}={}){var s,l;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof r.EthereumRpcError)return e.serialize();const f={};if(e&&"object"==typeof e&&!Array.isArray(e)&&c(e,"code")&&a(e.code)){const t=e;f.code=t.code,t.message&&"string"==typeof t.message?(f.message=t.message,c(t,"data")&&(f.data=t.data)):(f.message=i(f.code),f.data={originalError:u(e)})}else{f.code=t.code;const r=null===(s=e)||void 0===s?void 0:s.message;f.message=r&&"string"==typeof r?r:t.message,f.data={originalError:u(e)}}const p=null===(l=e)||void 0===l?void 0:l.stack;return n&&e&&p&&"string"==typeof p&&(f.stack=p),f}}(Wo);var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.ethErrors=void 0;const Go=Ro,Vo=Wo,$o=Ho;function Qo(e,t){const[r,n]=Zo(t);return new Go.EthereumRpcError(e,r||Vo.getMessageFromCode(e),n)}function Ko(e,t){const[r,n]=Zo(t);return new Go.EthereumProviderError(e,r||Vo.getMessageFromCode(e),n)}function Zo(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}Jo.ethErrors={rpc:{parse:e=>Qo($o.errorCodes.rpc.parse,e),invalidRequest:e=>Qo($o.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Qo($o.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Qo($o.errorCodes.rpc.methodNotFound,e),internal:e=>Qo($o.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Qo(t,e)},invalidInput:e=>Qo($o.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Qo($o.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Qo($o.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Qo($o.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Qo($o.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Qo($o.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Ko($o.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Ko($o.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Ko($o.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Ko($o.errorCodes.provider.disconnected,e),chainDisconnected:e=>Ko($o.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new Go.EthereumProviderError(t,r,n)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Ro;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=Wo;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=Jo;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const o=Ho;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}(Po);var Xo=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.JsonRpcEngine=void 0;const Yo=Xo(jo),ei=Po;class ti extends Yo.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[o,i,a]=await ti._runAllMiddleware(e,t,this._middleware);return i?(await ti._runReturnHandlers(a),n(o)):r((async e=>{try{await ti._runReturnHandlers(a)}catch(t){return e(t)}return e()}))}catch(o){return n(o)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const r=new ei.EthereumRpcError(ei.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:void 0,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){const r=new ei.EthereumRpcError(ei.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=Object.assign({},e),n={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,n)}catch(i){o=i}return o&&(delete n.result,n.error||(n.error=ei.serializeError(o))),t(o,n)}async _processRequest(e,t){const[r,n,o]=await ti._runAllMiddleware(e,t,this._middleware);if(ti._checkForCompletion(e,t,n),await ti._runReturnHandlers(o),r)throw r}static async _runAllMiddleware(e,t,r){const n=[];let o=null,i=!1;for(const a of r)if([o,i]=await ti._runMiddleware(e,t,a,n),i)break;return[o,i,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((o=>{const i=e=>{const r=e||t.error;r&&(t.error=ei.serializeError(r)),o([r,!0])},a=r=>{t.error?i(t.error):(r&&("function"!=typeof r&&i(new ei.EthereumRpcError(ei.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${ri(e)}`,{request:e})),n.push(r)),o([null,!1]))};try{r(e,t,a,i)}catch(s){i(s)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new ei.EthereumRpcError(ei.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${ri(e)}`,{request:e});if(!r)throw new ei.EthereumRpcError(ei.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${ri(e)}`,{request:e})}}function ri(e){return JSON.stringify(e,null,2)}Eo.JsonRpcEngine=ti;var ni={};Object.defineProperty(ni,"__esModule",{value:!0}),ni.mergeMiddleware=void 0;const oi=Eo;ni.mergeMiddleware=function(e){const t=new oi.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()},function(e){var t=i&&i.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=i&&i.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(mo,e),r(So,e),r(ko,e),r(vo,e),r(Eo,e),r(ni,e)}(bo);var ii=function(e){return(t,r,n,o)=>{const i=e[t.method];return void 0===i?n():"function"==typeof i?i(t,r,n,o):(r.result=i,o())}};const ai=(e,t,r,n)=>function(...o){return new(0,t.promiseModule)(((i,a)=>{t.multiArgs?o.push(((...e)=>{t.errorFirst?e[0]?a(e):(e.shift(),i(e)):i(e)})):t.errorFirst?o.push(((e,t)=>{e?a(e):i(t)})):o.push(i);const s=this===r?n:this;Reflect.apply(e,s,o)}))},si=new WeakMap;const ui=jo.default;var ci=class extends ui{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach((e=>this.emit("update",e)))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}};const li=ci;var fi={minBlockRef:function(...e){return pi(e)[0]},maxBlockRef:function(...e){const t=pi(e);return t[t.length-1]},sortBlockRefs:pi,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:di,incrementHexInt:function(e){if(null==e)return e;return hi(di(e)+1)},intToHex:hi,unsafeRandomBytes:function(e){let t="0x";for(let r=0;r<e;r++)t+=yi(),t+=yi();return t}};function pi(e){return e.sort(((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:di(e)-di(t)))}function di(e){return null==e?e:Number.parseInt(e,16)}function hi(e){if(null==e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function yi(){return Math.floor(16*Math.random()).toString(16)}const gi=zn,bi=(e,i)=>{i=((e,i)=>{for(var a in i||(i={}))r.call(i,a)&&o(e,a,i[a]);if(t)for(var a of t(i))n.call(i,a)&&o(e,a,i[a]);return e})({exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},i);const a=typeof e;if(null===e||"object"!==a&&"function"!==a)throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":a}\``);const s=new WeakMap,u=new Proxy(e,{apply(e,t,r){const n=s.get(e);if(n)return Reflect.apply(n,t,r);const o=i.excludeMain?e:ai(e,i,u,e);return s.set(e,o),Reflect.apply(o,t,r)},get(e,t){const r=e[t];if(!((e,t)=>{let r=si.get(e);if(r||(r={},si.set(e,r)),t in r)return r[t];const n=e=>"string"==typeof e||"symbol"==typeof t?t===e:e.test(t),o=Reflect.getOwnPropertyDescriptor(e,t),a=void 0===o||o.writable||o.configurable,s=(i.include?i.include.some(n):!i.exclude.some(n))&&a;return r[t]=s,s})(e,t)||r===Function.prototype[t])return r;const n=s.get(r);if(n)return n;if("function"==typeof r){const t=ai(r,i,u,e);return s.set(r,t),t}return r}});return u},mi=class extends li{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}},{bnToHex:vi,hexToInt:wi,incrementHexInt:_i,minBlockRef:Si,blockRefIsNumber:ki}=fi;var Ei=class extends mi{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new gi(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map((e=>e.toLowerCase())))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const r=Si(this.params.toBlock,e),n=Object.assign({},this.params,{toBlock:r}),o=await this._fetchLogs(n);this.addInitialResults(o)}async update({oldBlock:e,newBlock:t}){const r=t;let n;n=e?_i(e):t;const o=Object.assign({},this.params,{fromBlock:n,toBlock:r}),i=(await this._fetchLogs(o)).filter((e=>this.matchLog(e)));this.addResults(i)}async _fetchLogs(e){return await bi((t=>this.ethQuery.getLogs(e,t)))()}matchLog(e){if(wi(this.params.fromBlock)>=wi(e.blockNumber))return!1;if(ki(this.params.toBlock)&&wi(this.params.toBlock)<=wi(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every(((t,r)=>{let n=e.topics[r];if(!n)return!1;n=n.toLowerCase();let o=Array.isArray(t)?t:[t];if(o.includes(null))return!0;o=o.map((e=>e.toLowerCase()));return o.includes(n)}))}},ji=async function({provider:e,fromBlock:t,toBlock:r}){t||(t=r);const n=Oi(t),o=Oi(r),i=Array(o-n+1).fill().map(((e,t)=>n+t)).map(Ai);return await Promise.all(i.map((t=>function(e,t,r){return new Promise(((n,o)=>{e.sendAsync({id:1,jsonrpc:"2.0",method:t,params:r},((e,t)=>{if(e)return o(e);n(t.result)}))}))}(e,"eth_getBlockByNumber",[t,!1]))))};function Oi(e){return null==e?e:Number.parseInt(e,16)}function Ai(e){if(null==e)return e;return"0x"+e.toString(16)}const xi=ci,Pi=ji,{incrementHexInt:Ri}=fi;var Bi=class extends xi{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const r=t,n=Ri(e),o=(await Pi({provider:this.provider,fromBlock:n,toBlock:r})).map((e=>e.hash));this.addResults(o)}};const Mi=ci,Ci=ji,{incrementHexInt:Ti}=fi;var Fi=class extends Mi{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,r=Ti(e),n=await Ci({provider:this.provider,fromBlock:r,toBlock:t}),o=[];for(const i of n)o.push(...i.transactions);this.addResults(o)}};const Ii=ao.Mutex,{createAsyncMiddleware:Li}=bo,Ni=ii,Ui=Ei,zi=Bi,qi=Fi,{intToHex:Di,hexToInt:Wi}=fi;var Hi=function({blockTracker:e,provider:t}){let r=0,n={};const o=new Ii,i=function({mutex:e}){return t=>async(r,n,o,i)=>{(await e.acquire())(),t(r,n,o,i)}}({mutex:o}),a=Ni({eth_newFilter:i(Ji(u)),eth_newBlockFilter:i(Ji(c)),eth_newPendingTransactionFilter:i(Ji(l)),eth_uninstallFilter:i(Gi(d)),eth_getFilterChanges:i(Gi(f)),eth_getFilterLogs:i(Gi(p))}),s=async({oldBlock:e,newBlock:t})=>{if(0===n.length)return;const r=await o.acquire();try{await Promise.all(Vi(n).map((async r=>{try{await r.update({oldBlock:e,newBlock:t})}catch(n){console.error(n)}})))}catch(i){console.error(i)}r()};return a.newLogFilter=u,a.newBlockFilter=c,a.newPendingTransactionFilter=l,a.uninstallFilter=d,a.getFilterChanges=f,a.getFilterLogs=p,a.destroy=()=>{!async function(){const e=Vi(n).length;n={},y({prevFilterCount:e,newFilterCount:0})}()},a;async function u(e){const r=new Ui({provider:t,params:e});return await h(r),r}async function c(){const e=new zi({provider:t});return await h(e),e}async function l(){const e=new qi({provider:t});return await h(e),e}async function f(e){const t=Wi(e),r=n[t];if(!r)throw new Error(`No filter for index "${t}"`);return r.getChangesAndClear()}async function p(e){const t=Wi(e),r=n[t];if(!r)throw new Error(`No filter for index "${t}"`);return"log"===r.type?results=r.getAllResults():results=[],results}async function d(e){const t=Wi(e),r=n[t],o=Boolean(r);return o&&await async function(e){const t=Vi(n).length;delete n[e];const r=Vi(n).length;y({prevFilterCount:t,newFilterCount:r})}(t),o}async function h(t){const o=Vi(n).length,i=await e.getLatestBlock();await t.initialize({currentBlock:i}),r++,n[r]=t,t.id=r,t.idHex=Di(r);return y({prevFilterCount:o,newFilterCount:Vi(n).length}),r}function y({prevFilterCount:t,newFilterCount:r}){0===t&&r>0?e.on("sync",s):t>0&&0===r&&e.removeListener("sync",s)}};function Ji(e){return Gi((async(...t)=>{const r=await e(...t);return Di(r.id)}))}function Gi(e){return Li((async(t,r)=>{const n=await e.apply(null,t.params);r.result=n}))}function Vi(e,t){const r=[];for(let n in e)r.push(e[n]);return r}const $i=jo.default,Qi=ii,{createAsyncMiddleware:Ki}=bo,Zi=Hi,{unsafeRandomBytes:Xi,incrementHexInt:Yi}=fi,ea=ji;var ta=function({blockTracker:e,provider:t}){const r={},n=Zi({blockTracker:e,provider:t});let o=!1;const i=new $i,a=Qi({eth_subscribe:Ki((async function(i,a){if(o)throw new Error("SubscriptionManager - attempting to use after destroying");const u=i.params[0],c=Xi(16);let l;switch(u){case"newHeads":l=f({subId:c});break;case"logs":const e=i.params[1];l=p({subId:c,filter:await n.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${u}"`)}return r[c]=l,void(a.result=c);function f({subId:r}){const n={type:u,destroy:async()=>{e.removeListener("sync",n.update)},update:async({oldBlock:e,newBlock:n})=>{const o=n,i=Yi(e);(await ea({provider:t,fromBlock:i,toBlock:o})).map(ra).forEach((e=>{s(r,e)}))}};return e.on("sync",n.update),n}function p({subId:e,filter:t}){t.on("update",(t=>s(e,t)));return{type:u,destroy:async()=>await n.uninstallFilter(t.idHex)}}})),eth_unsubscribe:Ki((async function(e,t){if(o)throw new Error("SubscriptionManager - attempting to use after destroying");const n=e.params[0],i=r[n];if(!i)return void(t.result=!1);delete r[n],await i.destroy(),t.result=!0}))});return a.destroy=function(){i.removeAllListeners();for(const e in r)r[e].destroy(),delete r[e];o=!0},{events:i,middleware:a};function s(e,t){i.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}};function ra(e){return{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}export{Hi as a,Wt as b,jo as c,I as e,Bo as f,In as i,Tn as j,oo as p,ta as s,T as t,Z as u};
